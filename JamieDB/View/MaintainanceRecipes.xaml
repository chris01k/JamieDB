<Window x:Class="JamieDB.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:JamieDB"
        xmlns:viewmodel="clr-namespace:JamieDB.ViewModel"
        mc:Ignorable="d"
        Title="Recipe List" Height="450" Width="525">

    <Window.Resources>
        <viewmodel:MaintainanceRecipesViewModel x:Key="viewModel"/>
    </Window.Resources>

    <TabControl Margin="5" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
        <TabItem Header="Recipes">
            <Grid ShowGridLines="True">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="77*"/>
                    <ColumnDefinition Width="337*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <Menu Grid.Row="1" Grid.ColumnSpan="4">
                    <MenuItem Header="Recipe">

                    </MenuItem>
                </Menu>

                <ComboBox Grid.Row="2" Grid.ColumnSpan="4" Margin="5" ItemsSource="{Binding Recipes, Mode=TwoWay, Source={StaticResource viewModel}}" DisplayMemberPath="Name"
               SelectedItem="{Binding SelectedRecipe, Mode=TwoWay, Source={StaticResource viewModel}}"/>

                <StackPanel Grid.Row="3" Grid.Column="0" Orientation="Vertical" Margin="5" Grid.ColumnSpan="2" >
                    <Label>Name</Label>
                    <Label>Source</Label>
                </StackPanel>
                <StackPanel Grid.Row="3" Grid.Column="1" Orientation="Vertical" Margin="5">
                    <TextBox Text="{Binding SelectedRecipe.Name , Source={StaticResource viewModel}, Mode=TwoWay}" Margin="5"></TextBox>
                    <TextBox Text="{Binding SelectedRecipe.Source, Source={StaticResource viewModel}}" Margin="5" IsReadOnly="True"></TextBox>
                </StackPanel>

                <StackPanel Grid.Row="3" Grid.Column="3" Orientation="Vertical">
                    <Button Content="New" Margin="5" Command="{Binding NewRecipeCommand, Mode=TwoWay, Source={StaticResource viewModel}}" />
                    <Button Content="Delete" Margin="5"/>
                </StackPanel>

                <DataGrid Grid.Row="4" Grid.ColumnSpan="2" Margin="5" AutoGenerateColumns="False" ItemsSource="{Binding RecipeIngredients, Source={StaticResource viewModel}}"
                      AlternationCount="2"
                      RowBackground="White"
                      AlternatingRowBackground="LightCyan"
                      SelectedItem="{Binding Path=SelectedRecipeIngredient, Mode=TwoWay}">

                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Recipe" Width="Auto" Binding= "{Binding Path=Recipe.Name, Mode=TwoWay}" ></DataGridTextColumn>
                        <DataGridTextColumn Header="Quantity" Width="Auto" Binding= "{Binding Path=Quantity, Mode=TwoWay}"></DataGridTextColumn>
                        <DataGridComboBoxColumn Header="Unit" Width="Auto" 
                                        ItemsSource="{Binding Units, Source={StaticResource viewModel}}"
                                        DisplayMemberPath="Symbol"
                                        SelectedValuePath="Id"
                                        SelectedValueBinding="{Binding Path=Unit}"/>
                        <DataGridComboBoxColumn Header="Ingredient" Width="*" 
                                        ItemsSource="{Binding Ingredients, Source={StaticResource viewModel}}"
                                        DisplayMemberPath="Name"
                                        SelectedValuePath="Id"
                                        SelectedValueBinding="{Binding Path=Ingredient}"/>
                    </DataGrid.Columns>
                </DataGrid>

                <StackPanel Grid.Row="4" Grid.Column="3" Orientation="Vertical">
                    <Button Content="New" Margin="5" Command="{Binding NewRecipeIngredientCommand, Mode=OneWay, Source={StaticResource viewModel}}" />
                    <Button Content="Delete" Margin="5"/>
                </StackPanel>
                <Button Grid.Row="5" Grid.Column="3" Content="Save" Margin="5" Width="70" Command="{Binding SaveRecipeCommand, Mode=TwoWay, Source={StaticResource viewModel}}" />

            </Grid>
        </TabItem>
        <TabItem Header="Ingredients">
            <Grid ShowGridLines="True">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="2*"/>
                </Grid.ColumnDefinitions>
                <StackPanel Grid.Row="0" Grid.Column="0" Margin="5">
                    <Label>Ingredient</Label>
                    <Label>Target Unit</Label>
                    <Label>Type</Label>
                </StackPanel>
                <StackPanel Grid.Row="0" Grid.Column="1"  Margin="5">
                    <TextBox Margin="5" Width="Auto" Text="{Binding SelectedIngredient.Id, Source={StaticResource viewModel}}" IsReadOnly="True"></TextBox>
                    <ComboBox Margin="5"></ComboBox>
                    <ComboBox Margin="5"></ComboBox>
                </StackPanel>
                <StackPanel Grid.Row="0" Grid.Column="2" Margin="5" Grid.ColumnSpan="2">
                    <ComboBox Margin="5" ItemsSource="{Binding Ingredients, Mode=TwoWay, Source={StaticResource viewModel}}" DisplayMemberPath="Name"
               SelectedItem="{Binding SelectedIngredient, Mode=TwoWay, Source={StaticResource viewModel}}"></ComboBox>
                    <TextBox Margin="5" ></TextBox>
                    <TextBox Margin="5" ></TextBox>
                </StackPanel>
                <GroupBox Grid.Row="1" Grid.Column="0" Margin="5" Grid.ColumnSpan="4">Flags</GroupBox>

            </Grid>
        </TabItem>
        <TabItem Header="Units"></TabItem>

    </TabControl>

</Window>

